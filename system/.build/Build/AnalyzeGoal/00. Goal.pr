{
  "GoalName": "AnalyzeGoal",
  "Comment": null,
  "Version": 1,
  "GoalSteps": [
    {
      "Text": "write out \"Analyzing goal \\n%goal.Text% ...\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_goal_text_message",
      "Description": "Write out the message 'Analyzing goal' followed by a newline and then the content of the variable %goal.Text% with ellipsis, to the output stream for user or system visibility.",
      "PrFileName": "01. write_out_goal_text_message.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\01. write_out_goal_text_message.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-11T10:01:27.1025826+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 0,
      "LineNumber": 18,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "cc2dbd5047fade43e768fe40a9face2dcbf38d67906ff9cb28d5a8eaa06b7036",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] get all modules (GetAllModules2), write to %modules%",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "get_all_modules",
      "Description": "Invoke the PlangModule to retrieve all modules available in the system, then write the output to the variable %modules% for further use.",
      "PrFileName": "02. get_all_modules.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\02. get_all_modules.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T16:36:45.355867+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 1,
      "LineNumber": 19,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "2d4f042b673ed843a7ed0fa29f6cedf759f1dbbeff4f7c62e205014f53d0ddf8",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "render template \"/system/modules/plang/templates/GetModules.html\", write to %modulesHtml%",
      "Comment": null,
      "ModuleType": "PLang.Modules.TemplateEngineModule",
      "Name": "render_template_to_variable",
      "Description": "Render the HTML template located at /system/modules/plang/templates/GetModules.html and write the rendered HTML content into the variable %modulesHtml% for further use",
      "PrFileName": "03. render_template_to_variable.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\03. render_template_to_variable.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T16:28:43.9492969+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 2,
      "LineNumber": 20,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "ccdb9bfa7613ac08fd545b377440b5158c7e265d7cc84dd3431806f97fda6b20",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "write %modulesHtml% to \"modulesHtml.md\", overwrite",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "write_moduleshtml_to_file",
      "Description": "Take the content stored in the variable %modulesHtml% and write it to a file called 'modulesHtml.md'. If the file already exists, overwrite its contents with the new data from %modulesHtml%",
      "PrFileName": "04. write_moduleshtml_to_file.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\04. write_moduleshtml_to_file.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-10T13:18:29.303886+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 3,
      "LineNumber": 21,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "6aa08a51ea161e7424fedb9f53b59197adf276fa4dbc2a82f1c6272ecc559497",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/goal/goalSystem.llm, load vars, write to %system%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_goal_system_file_and_load_vars",
      "Description": "Read the file located at llm/goal/goalSystem.llm, extract or load the variables defined within that file, and store the resulting data into the %system% variable for further use.",
      "PrFileName": "05. read_llm_goal_system_file_and_load_vars.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\05. read_llm_goal_system_file_and_load_vars.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-10T16:00:07.6613383+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 4,
      "LineNumber": 22,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "5cc5f40cd899e5ffaa480c80f78db276ac0b20ca31dffde0e9c2deb6bc79037c",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[llm] system: %system%\n    user: \"\n        ## Goal information\n    \\- Goal name is: %goal.GoalName%\n    \\- There are %goal.Steps.count% steps in this goal\n        ## Goal\n        %goal.Text%\"\n    scheme: %goalScheme%\n    write to %llmGoal%",
      "Comment": null,
      "ModuleType": "PLang.Modules.LlmModule",
      "Name": "call_llm_with_goal_information",
      "Description": "Send a prompt to the language model containing system instructions and user content that includes the goal name, number of steps, and the goal text. The prompt uses a specified scheme and the LLM's response is saved into the variable %llmGoal%.",
      "PrFileName": "06. call_llm_with_goal_information.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\06. call_llm_with_goal_information.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-11T10:41:05.5455394+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 5,
      "LineNumber": 23,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "fc94702066a53bb5959402e48e0f76102c2e7fda4bd571b339d498259051333c",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "set %goal.llm% = %llmGoal!llm%",
      "Comment": null,
      "ModuleType": "PLang.Modules.VariableModule",
      "Name": "set_goal_llm_variable",
      "Description": "Take the value stored in the variable %llmGoal!llm% and assign it to the variable %goal.llm%, effectively copying or updating the value of %goal.llm% with the current value of %llmGoal!llm%.",
      "PrFileName": "07. set_goal_llm_variable.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\07. set_goal_llm_variable.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-15T15:19:41.2202355+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 6,
      "LineNumber": 33,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "4c58b5b7102b9394e6368cd591123c7b30534f515782a9c5d731d5e7e9ce7510",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "write out \"scheme: %goalScheme%\\nllmGoal: %llmGoal%\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_goal_scheme_and_llm_goal",
      "Description": "Write out a string that includes the current values of the variables %goalScheme% and %llmGoal%, formatted with labels and newline between them, to the output stream for the user or system to see",
      "PrFileName": "08. write_out_goal_scheme_and_llm_goal.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\08. write_out_goal_scheme_and_llm_goal.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-17T12:05:38.5177054+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 7,
      "LineNumber": 34,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "1a54c717a736ab8897f6fc53ebaac8b805f19819b39e712e392c83d6c4f1a964",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "call goal ValidateLlmGoal\n    on error call FixGoal retry 3 times",
      "Comment": "check if name, description is empty, if steps match to goal",
      "ModuleType": "PLang.Modules.CallGoalModule",
      "Name": "call_goal_with_error_handling_and_retry",
      "Description": "Execute the goal ValidateLlmGoal. If an error occurs during this execution, automatically call the FixGoal to handle the error and retry the ValidateLlmGoal up to 3 times before failing.",
      "PrFileName": "09. call_goal_with_error_handling_and_retry.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\09. call_goal_with_error_handling_and_retry.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-16T11:32:32.7285103+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": [
        {
          "IgnoreError": false,
          "Message": null,
          "StatusCode": null,
          "Key": "*",
          "GoalToCall": {
            "Path": ".build\\Build\\FixGoal\\00. Goal.pr",
            "Name": "FixGoal",
            "Parameters": {},
            "IsAsync": false,
            "WaitBeforeExecutingInMs": 0,
            "AfterExecution": null
          },
          "RetryHandler": {
            "RetryCount": 3,
            "RetryDelayInMilliseconds": null
          },
          "RunRetryBeforeCallingGoalToCall": false
        }
      ],
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 8,
      "LineNumber": 36,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "1e375d23078f00f5f294605a43e6e3bd2881db76580489eea7abcc80dfc29df4",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "foreach %goal.Steps% call goal AnalyzeStepErrorHandler item=%step%",
      "Comment": "- write out \"goal: %goal%\\nprGoal:%prGoal%\"",
      "ModuleType": "PLang.Modules.LoopModule",
      "Name": "foreach_step_call_analyze_step_error_handler",
      "Description": "For each step in the collection %goal.Steps%, call the goal named AnalyzeStepErrorHandler passing the current step as the item parameter %step%. This allows processing or handling errors for each step individually.",
      "PrFileName": "10. foreach_step_call_analyze_step_error_handler.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\10. foreach_step_call_analyze_step_error_handler.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-16T11:32:32.7998917+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 9,
      "LineNumber": 39,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "c8d1f7a94fda484016c5fa21546b7e2b1281028c6185400869a8d93f298d8ef6",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "save %goal% to file %goal.PrPath%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "save_goal_to_file",
      "Description": "Take the data stored in the variable %goal% and write it to a file at the location specified by the variable %goal.PrPath%. This operation persists the goal data to disk.",
      "PrFileName": "11. save_goal_to_file.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\11. save_goal_to_file.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-16T11:32:32.8678112+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 10,
      "LineNumber": 40,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "7ed2a511928d3d176cb69d91ad87f2b9f34e589b056bcf6973474f9137a37b9a",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "write out \"%goal.Name% has been built - time: %!goal.Stopwatch.ToString()%\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_goal_build_time",
      "Description": "Construct a message string that includes the name of the goal and the elapsed time from the stopwatch, then write this message to the output stream for display or logging purposes.",
      "PrFileName": "12. write_out_goal_build_time.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeGoal\\12. write_out_goal_build_time.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-16T11:32:32.9262797+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 11,
      "LineNumber": 41,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "b41b36bfcf48124dbd98442bfe419a984e616773b8873269bf9746e22d39ef4b",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    }
  ],
  "SubGoals": [],
  "Description": "The AnalyzeGoal is designed to analyze a specified goal by performing a series of steps. It begins by outputting the goal's text, retrieves all modules, renders a template for the modules, and saves the rendered HTML to a markdown file. It then reads a specific LLM file to load variables and prepares the goal for further analysis. The goal's name, step count, and text are formatted into a user-friendly message. The goal also validates the LLM goal and handles any errors that may arise during the analysis of each step. Finally, it saves the goal to a specified file path and outputs a completion message with the time taken for the process.",
  "Visibility": 0,
  "GoalFileName": "Build.goal",
  "PrFileName": "00. Goal.pr",
  "PrPath": ".build\\Build\\AnalyzeGoal\\00. Goal.pr",
  "RelativeGoalPath": "\\Build.goal",
  "RelativeGoalFolderPath": "\\",
  "RelativePrPath": ".build\\Build\\AnalyzeGoal\\00. Goal.pr",
  "RelativePrFolderPath": ".build\\Build\\AnalyzeGoal",
  "RelativeAppStartupFolderPath": null,
  "BuilderVersion": "1.0.0.0",
  "GoalInfo": null,
  "Injections": [],
  "Signature": null,
  "Hash": "9a2eaae822762b05dc33ba70235a043f7f597452d62e4e18f982fe9db9995f67",
  "IncomingVariablesRequired": {
    "%goal.Text%": "The text description of the goal being analyzed.",
    "%modules%": "A collection of all modules retrieved for analysis.",
    "%modulesHtml%": "The HTML representation of the modules.",
    "%system%": "The system variables loaded from the specified LLM file.",
    "%goal.GoalName%": "The name of the goal being analyzed.",
    "%goal.Steps.count%": "The count of steps defined in the goal.",
    "%goalScheme%": "The scheme structure of the goal.",
    "%llmGoal%": "The formatted LLM goal information.",
    "%goal.llm%": "The LLM goal variable that is set with the LLM goal information.",
    "%goal.PrPath%": "The file path where the goal will be saved.",
    "%!goal.Stopwatch.ToString()%": "The time taken for the goal analysis process."
  },
  "DataSourceName": null,
  "IsSetup": false,
  "IsEvent": false,
  "IsStart": false
}