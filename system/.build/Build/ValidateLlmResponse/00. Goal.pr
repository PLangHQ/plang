{
  "GoalName": "ValidateLlmResponse",
  "Comment": null,
  "Version": 1,
  "GoalSteps": [
    {
      "Text": "if %step.retryCount% > 2 throw \"Could not validate step\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.ThrowErrorModule",
      "Name": "throw_error_if_retry_count_exceeds_two",
      "Description": "Evaluate the variable %step.retryCount% to determine if it is greater than 2. If this condition is true, immediately throw an error with the message 'Could not validate step' to stop or handle the failure scenario.",
      "PrFileName": "01. throw_error_if_retry_count_exceeds_two.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\01. throw_error_if_retry_count_exceeds_two.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:46:56.6556668+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 0,
      "LineNumber": 138,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "180e3d20ecede4b58eeb0de923e7a5355b44f99847365a37fe0f4841c04209c7",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "validate %prMethod% is valid json, write to %error%",
      "Comment": null,
      "ModuleType": "PLang.Modules.ValidateModule",
      "Name": "validate_prmethod_is_valid_json",
      "Description": "Check if the content of the variable %prMethod% is valid JSON format. If the validation fails, write the error or validation result to the %error% variable for further handling or reporting.",
      "PrFileName": "02. validate_prmethod_is_valid_json.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\02. validate_prmethod_is_valid_json.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:47:06.4451921+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 1,
      "LineNumber": 139,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "afd37007226c56b4cf1954f68472b09c950e4972281ba51dc7aa5e3995cfe0cc",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "if %error% is empty then return",
      "Comment": null,
      "ModuleType": "PLang.Modules.ConditionalModule",
      "Name": "return_if_error_empty",
      "Description": "Evaluate whether the variable %error% is empty. If it is empty, immediately return from the current execution context, effectively ending the step or goal early without further processing.",
      "PrFileName": "03. return_if_error_empty.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\03. return_if_error_empty.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T16:53:41.4099981+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 2,
      "LineNumber": 140,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "d4a85cf09bc197135e58856d07b877b564690b3359fba6158b2b62838d515211",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "append llm 'user': %error%",
      "Comment": null,
      "ModuleType": "PLang.Modules.LlmModule",
      "Name": "append_llm_user_error",
      "Description": "Take the current value of the variable %error% and append it to the 'user' part of an LLM prompt or input, presumably to provide additional context or information to the language model.",
      "PrFileName": "04. append_llm_user_error.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\04. append_llm_user_error.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T16:53:42.7711816+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 3,
      "LineNumber": 141,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "a8db6c063f2db3aaac20fcbee5102f81c0b499700db5879671b6a374955b1d45",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "retry step",
      "Comment": null,
      "ModuleType": "PLang.Modules.ThrowErrorModule",
      "Name": "retry_step",
      "Description": "This step instructs the system to retry the current step, possibly after an error or failure, to attempt the operation again.",
      "PrFileName": "05. retry_step.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\05. retry_step.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T16:53:44.1521232+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 4,
      "LineNumber": 142,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "7639ca3b14d77da4a9bef3cf8742e088590c0ed3f820049be538a5ca25d1e564",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    }
  ],
  "SubGoals": [],
  "Description": "The ValidateLlmResponse goal is designed to validate a response from a language model (LLM). It first checks if the retry count exceeds 2, in which case it throws an error indicating that the step could not be validated. Next, it validates whether the provided method (%prMethod%) is a valid JSON format and writes any errors encountered to the %error% variable. If there are no errors, the goal returns early. If there are errors, it appends the error message to the LLM with the key 'user' and then retries the step.",
  "Visibility": 0,
  "GoalFileName": "Build.goal",
  "PrFileName": "00. Goal.pr",
  "PrPath": ".build\\Build\\ValidateLlmResponse\\00. Goal.pr",
  "RelativeGoalPath": "\\Build.goal",
  "RelativeGoalFolderPath": "\\",
  "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\00. Goal.pr",
  "RelativePrFolderPath": ".build\\Build\\ValidateLlmResponse",
  "RelativeAppStartupFolderPath": null,
  "BuilderVersion": "1.0.0.0",
  "GoalInfo": null,
  "Injections": [],
  "Signature": null,
  "Hash": "4df31f5a5122fd41a20c87b4799fe8ab8dd2f9810c7e11331a766ae8d72bf319",
  "IncomingVariablesRequired": {
    "%step.retryCount%": "The number of times the step has been retried, used to determine if the maximum retry limit has been reached.",
    "%prMethod%": "The method that needs to be validated as a valid JSON.",
    "%error%": "A variable to capture any validation errors encountered during the process."
  },
  "DataSourceName": null,
  "IsSetup": false,
  "IsEvent": false,
  "IsStart": false
}