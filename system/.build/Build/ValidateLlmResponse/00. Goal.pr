{
  "GoalName": "ValidateLlmResponse",
  "Comment": null,
  "GoalSteps": [
    {
      "Text": "if %step.retryCount% > 2 throw \"Could not validate step\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.ThrowErrorModule",
      "Name": "throw_error_if_retry_count_exceeds_two",
      "Description": "Evaluate the variable %step.retryCount% to determine if it is greater than 2. If this condition is true, immediately throw an error with the message 'Could not validate step' to stop or handle the failure scenario.",
      "PrFileName": "01. throw_error_if_retry_count_exceeds_two.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\01. throw_error_if_retry_count_exceeds_two.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:46:56.6556668+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 0,
      "LineNumber": 96,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "6b38539a663821bec2e1703b92116d81b509cb0c619b2547e47a69de47cdfca4",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "validate %prMethod% is valid json, write to %error%",
      "Comment": null,
      "ModuleType": "PLang.Modules.ValidateModule",
      "Name": "validate_prmethod_is_valid_json",
      "Description": "Check if the content of the variable %prMethod% is valid JSON format. If the validation fails, write the error or validation result to the %error% variable for further handling or reporting.",
      "PrFileName": "02. validate_prmethod_is_valid_json.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\02. validate_prmethod_is_valid_json.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:47:06.4451921+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 1,
      "LineNumber": 97,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "c64dffea821a63e4b1e0e8e7b69329335267833d5eb3d1b8533606410e3def21",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "if %error% is empty then return",
      "Comment": null,
      "ModuleType": "PLang.Modules.ConditionalModule",
      "Name": "return_if_error_empty",
      "Description": "Evaluate whether the variable %error% is empty. If it is empty, immediately return from the current execution context, effectively ending the step or goal early without further processing.",
      "PrFileName": "03. return_if_error_empty.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\03. return_if_error_empty.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": "Very High",
      "Inconsistency": null,
      "Generated": "2025-12-09T16:53:41.4099981+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 2,
      "LineNumber": 98,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "ebdaf987c5f9fed655e734bdf0b960b8e39d7351c2221a6d73017a10d9d05c55",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": "Check if the variable %error% is empty and if so, exit or return from the current step or goal"
    },
    {
      "Text": "append llm 'user': %error%",
      "Comment": null,
      "ModuleType": "PLang.Modules.LlmModule",
      "Name": "append_llm_user_error",
      "Description": "Take the current value of the variable %error% and append it to the 'user' part of an LLM prompt or input, presumably to provide additional context or information to the language model.",
      "PrFileName": "04. append_llm_user_error.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\04. append_llm_user_error.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": "Very High",
      "Inconsistency": null,
      "Generated": "2025-12-09T16:53:42.7711816+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 3,
      "LineNumber": 99,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "f68c0b231df5f9f7c8524c31b8380e3f964e61e49897c4950a535ee3ef80a732",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": "Append the content of the variable %error% to the 'user' input of an LLM (Large Language Model) interaction"
    },
    {
      "Text": "retry step",
      "Comment": null,
      "ModuleType": "PLang.Modules.ThrowErrorModule",
      "Name": "retry_step",
      "Description": "This step instructs the system to retry the current step, possibly after an error or failure, to attempt the operation again.",
      "PrFileName": "05. retry_step.pr",
      "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\05. retry_step.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": "Very High",
      "Inconsistency": null,
      "Generated": "2025-12-09T16:53:44.1521232+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 4,
      "LineNumber": 100,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "11a6f0b2e4b1890c9f24c812dd3466ce29bacbd503df25f26e82ecd07b863b12",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": "The user wants to retry the current step or operation, likely after a failure or error."
    }
  ],
  "SubGoals": [],
  "Description": "The ValidateLlmResponse goal is designed to validate a response from a language model (LLM). It first checks if the retry count exceeds 2, in which case it throws an error indicating that the step could not be validated. Next, it validates whether the provided method (%prMethod%) is a valid JSON format and writes any errors encountered to the %error% variable. If there are no errors, the goal returns early. If there are errors, it appends the error message to the LLM with the key 'user' and then retries the step.",
  "Visibility": 0,
  "GoalFileName": "Build.goal",
  "PrFileName": "00. Goal.pr",
  "RelativeGoalPath": "\\Build.goal",
  "RelativeGoalFolderPath": "\\",
  "RelativePrPath": ".build\\Build\\ValidateLlmResponse\\00. Goal.pr",
  "RelativePrFolderPath": ".build\\Build\\ValidateLlmResponse",
  "RelativeAppStartupFolderPath": null,
  "BuilderVersion": "0.1.18.1",
  "GoalInfo": null,
  "Injections": [],
  "Signature": null,
  "Hash": "c5556f6e3b76da355380c38db66011d70526b1e0cf084998d0afdb735edf5090",
  "IncomingVariablesRequired": {
    "%step.retryCount%": "The number of times the step has been retried, used to determine if the maximum retry limit has been reached.",
    "%prMethod%": "The method that needs to be validated as a valid JSON.",
    "%error%": "A variable to capture any validation errors encountered during the process."
  },
  "DataSourceName": null,
  "IsSetup": false,
  "IsEvent": false
}