{
  "GoalName": "AnalyzeStep",
  "Comment": null,
  "Version": 1,
  "GoalSteps": [
    {
      "Text": "write out \"Analyzing step: `- %step.Text%` \"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_step_text",
      "Description": "Write out the string 'Analyzing step: ' followed by the content of the variable %step.Text% to the output stream, typically to inform the user or log the step being analyzed",
      "PrFileName": "01. write_out_step_text.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\01. write_out_step_text.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-07T00:02:56.3128294+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 0,
      "LineNumber": 45,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "4d2f643b195f2f43e57c2c959958aa1c0342f7c9f48ce316f34afeb20d30c079",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] get class description from %step.Module%, write to %module%",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "get_class_description_from_module",
      "Description": "Access the class description associated with the class name or identifier stored in the variable %step.Module%, then write or assign that description to the variable %module%. This likely involves querying metadata or reflection information about the class.",
      "PrFileName": "02. get_class_description_from_module.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\02. get_class_description_from_module.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:45:29.406488+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 1,
      "LineNumber": 46,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "edc980b54b5f16bc14cea6739676544a3e37503c8e2ffc02b95869eb797b7516",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "render template \"/system/modules/plang/templates/functions.html\", write to %functions%",
      "Comment": null,
      "ModuleType": "PLang.Modules.TemplateEngineModule",
      "Name": "render_template_functions_html",
      "Description": "Load the template file located at /system/modules/plang/templates/functions.html, process it through the template engine to generate the final HTML content, and store this rendered content into the variable %functions% for further use",
      "PrFileName": "03. render_template_functions_html.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\03. render_template_functions_html.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-11T11:53:13.7578631+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 2,
      "LineNumber": 47,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "e1b702de5a74d573f20a04cdd62abf7ae2709e74c7a398fff31cf56f1479430b",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "save %functions% to \"functions.md\", overwrite",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "save_functions_to_markdown_file",
      "Description": "Take the content stored in the variable %functions% and write it to a file called functions.md. If the file already exists, overwrite its content with the new data from %functions%",
      "PrFileName": "04. save_functions_to_markdown_file.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\04. save_functions_to_markdown_file.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-11T11:53:21.6721231+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 3,
      "LineNumber": 48,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "18663e3ab137b214a18df369ec1de3e39df9622bd9989ba00d3aa83a4e4990a6",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/step/stepRules.llm, write to %rules%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_step_rules_file",
      "Description": "Access the file located at 'llm/step/stepRules.llm', read its entire content, and assign that content to the variable named %rules% for further use in the program.",
      "PrFileName": "05. read_llm_step_rules_file.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\05. read_llm_step_rules_file.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-10T16:00:20.4777412+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 4,
      "LineNumber": 49,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "39992465e5358df102805d460033a2038f1540887dff6de087fd3a0af5506dc9",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/step/stepSystem.llm, load vars, write to %system%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_step_system_file_and_load_vars",
      "Description": "This step reads the file located at 'llm/step/stepSystem.llm', loads variables from its content, and writes the loaded data into the variable named %system% for further use.",
      "PrFileName": "06. read_llm_step_system_file_and_load_vars.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\06. read_llm_step_system_file_and_load_vars.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-13T15:59:08.4408406+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 5,
      "LineNumber": 50,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "267f49a4ebad57bac0a6a0b481c44487af3a6de26e556e7a5721f94055161b1b",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "call goal /system/modules/%step.Module.Replace(\".Program\", \"\")%/Builder/Builder\n    on error 404 call BuilderModuleNotFound\n    write to %assistant%",
      "Comment": null,
      "ModuleType": "PLang.Modules.CallGoalModule",
      "Name": "call_dynamic_goal_with_error_handling",
      "Description": "Invoke a goal whose path is constructed dynamically using the current step's module name with '.Program' removed, specifically calling the Builder goal within that module's Builder subfolder. If a 404 error occurs (goal not found), call the BuilderModuleNotFound goal. Finally, write the output of the call to the %assistant% variable.",
      "PrFileName": "07. call_dynamic_goal_with_error_handling.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\07. call_dynamic_goal_with_error_handling.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-15T15:00:20.664168+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": [
        {
          "IgnoreError": false,
          "Message": null,
          "StatusCode": 404,
          "Key": null,
          "GoalToCall": {
            "Path": ".build\\Build\\BuilderModuleNotFound\\00. Goal.pr",
            "Name": "BuilderModuleNotFound",
            "Parameters": {},
            "IsAsync": false,
            "WaitBeforeExecutingInMs": 0,
            "AfterExecution": null
          },
          "RetryHandler": null,
          "RunRetryBeforeCallingGoalToCall": false
        }
      ],
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 6,
      "LineNumber": 51,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "4b9acc21079cbbac9ee1911e6682d37110da085f0de8f7759a89d300c84ca6c0",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[llm] system: %system%,\n    user: %step.Text%\n    assistant: %assistant%\n    scheme: typeof(PLang.Modules.PlangModule.Data.LlmStep)\n    write to %llmStep%",
      "Comment": "- write out \"\\n==== system ==== %system%\\n==== system ====\\nstep.Text: %step.Text%\"",
      "ModuleType": "PLang.Modules.LlmModule",
      "Name": "llm_interaction_with_system_and_user_messages",
      "Description": "Send a prompt to the language model with the system message from %system% and user input from %step.Text%, receive the assistant's response, and write the result as an LlmStep object to %llmStep%",
      "PrFileName": "08. llm_interaction_with_system_and_user_messages.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\08. llm_interaction_with_system_and_user_messages.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-15T11:20:49.4522738+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 7,
      "LineNumber": 55,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "573e154a8ff13710b7d10fb20c057dab29ab093cafc4daa451e9756490d3239c",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "append %llmStep!llm% to %step.llm%",
      "Comment": null,
      "ModuleType": "PLang.Modules.VariableModule",
      "Name": "append_llmstep_to_stepllmm",
      "Description": "Take the value stored in the variable %llmStep!llm% and append it to the existing value of the variable %step.llm%, effectively concatenating the two variable values and storing the result back in %step.llm%.",
      "PrFileName": "09. append_llmstep_to_stepllmm.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\09. append_llmstep_to_stepllmm.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-15T15:20:39.9571359+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 8,
      "LineNumber": 60,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "e13b5678e76e40d6d150f8428a2d890af3d13f4da205a3b97848d70d846bb25d",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "write out \"\\nllmStep: %llmStep!llm%\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_llmstep_variable",
      "Description": "Display or write the string '\\nllmStep: ' followed by the value of the variable %llmStep!llm% to the output stream, likely for debugging or informational purposes",
      "PrFileName": "10. write_out_llmstep_variable.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\10. write_out_llmstep_variable.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": "Very High",
      "Inconsistency": null,
      "Generated": "2025-12-15T15:31:25.311139+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 9,
      "LineNumber": 61,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "d2c86bfb56313b5a483027a55ded0e04927a279e1fb372f007aebc426fab252d",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": "Output the content of the variable %llmStep!llm% to the user or output stream"
    },
    {
      "Text": "call goal ValidateLlmStep",
      "Comment": null,
      "ModuleType": "PLang.Modules.CallGoalModule",
      "Name": "call_goal_validatellmstep",
      "Description": "This step triggers the execution of the goal named ValidateLlmStep, which likely contains a series of steps or logic to validate an LLM-related operation or data.",
      "PrFileName": "11. call_goal_validatellmstep.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\11. call_goal_validatellmstep.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": "Very High",
      "Inconsistency": null,
      "Generated": "2025-12-15T15:31:25.3682691+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 10,
      "LineNumber": 62,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "db30510b75581c6479aa57b46e67afb425daa44cae35ced2a0a285122c28f3b5",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": "Invoke the execution of a predefined goal named ValidateLlmStep"
    }
  ],
  "SubGoals": [],
  "Description": "The AnalyzeStep goal is designed to analyze a specific step in a Plang module. It begins by logging the step being analyzed, retrieves the class description from the specified module, and renders a template for functions. The functions are then saved to a markdown file. The goal also reads predefined rules and system configurations from specified files, and it attempts to call a builder goal based on the module name. If the builder module is not found, it handles the error accordingly. The system, user input, and assistant output are structured into a defined scheme for further processing. Finally, it appends the generated llm step to the original step's llm and validates the llm step.",
  "Visibility": 0,
  "GoalFileName": "Build.goal",
  "PrFileName": "00. Goal.pr",
  "PrPath": ".build\\Build\\AnalyzeStep\\00. Goal.pr",
  "RelativeGoalPath": "\\Build.goal",
  "RelativeGoalFolderPath": "\\",
  "RelativePrPath": ".build\\Build\\AnalyzeStep\\00. Goal.pr",
  "RelativePrFolderPath": ".build\\Build\\AnalyzeStep",
  "RelativeAppStartupFolderPath": null,
  "BuilderVersion": "1.0.0.0",
  "GoalInfo": null,
  "Injections": [],
  "Signature": null,
  "Hash": "9077497c3c2283809cc07296b70d68ade3e872396ec8c22576c30d8f2c525021",
  "IncomingVariablesRequired": {
    "%step.Text%": "The text description of the step being analyzed.",
    "%step.Module%": "The module from which the class description is to be retrieved."
  },
  "DataSourceName": null,
  "IsSetup": false,
  "IsEvent": false,
  "IsStart": false
}