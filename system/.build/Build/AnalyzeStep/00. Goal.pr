{
  "GoalName": "AnalyzeStep",
  "Comment": null,
  "GoalSteps": [
    {
      "Text": "write out \"Analyzing step: `- %step.Text%` \"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_step_text",
      "Description": "Write out the string 'Analyzing step: ' followed by the content of the variable %step.Text% to the output stream, typically to inform the user or log the step being analyzed",
      "PrFileName": "01. write_out_step_text.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\01. write_out_step_text.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-07T00:02:56.3128294+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 0,
      "LineNumber": 40,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "bff67200a8ea27724911d420d2e6a0f613f63ff2be1380e7a3dd4ff3c55a5891",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] get class description from %step.Module%, write to %module%",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "get_class_description_from_module",
      "Description": "Access the class description associated with the class name or identifier stored in the variable %step.Module%, then write or assign that description to the variable %module%. This likely involves querying metadata or reflection information about the class.",
      "PrFileName": "02. get_class_description_from_module.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\02. get_class_description_from_module.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:45:29.406488+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 1,
      "LineNumber": 41,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "3069ae7f96f7aa4f34bfcf935f3aacac9ce784d801da28ffa757097c0db2420f",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] get class description from %step.SecondModule%, write to %secondModule%",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "get_class_description_from_second_module",
      "Description": "Access the class description or metadata of the class named or referenced by the variable %step.SecondModule% and write the resulting description into the variable %secondModule% for further use.",
      "PrFileName": "03. get_class_description_from_second_module.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\03. get_class_description_from_second_module.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T15:45:37.1487496+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 2,
      "LineNumber": 42,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "8f867e2343a08e590b179506bffa642128f5bd8303cc16abddad0d57fd69024f",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "render template \"/system/modules/plang/templates/MethodsInModules.html\", write to %modulesAndMethods%",
      "Comment": null,
      "ModuleType": "PLang.Modules.TemplateEngineModule",
      "Name": "render_template_to_variable",
      "Description": "Render the HTML template located at /system/modules/plang/templates/MethodsInModules.html and write the rendered content into the variable %modulesAndMethods% for further use",
      "PrFileName": "04. render_template_to_variable.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\04. render_template_to_variable.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-08T16:28:56.8775556+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 3,
      "LineNumber": 43,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "0a55da565690ad5c5dca725b454bdc4a96beaf4d131c19c9bd11d8611e6f1655",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/stepRules.llm, write to %rules%",
      "Comment": "- write out \"\\n==== methods ==== %modulesAndMethods%\\n==== methods ====\"",
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_steprules_llm_to_rules",
      "Description": "Open and read the file located at 'llm/stepRules.llm' and store the entire content into the variable named %rules% for further use in the program.",
      "PrFileName": "05. read_llm_steprules_llm_to_rules.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\05. read_llm_steprules_llm_to_rules.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:02.1762568+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 4,
      "LineNumber": 45,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "eb3d27a0af46a3f8aee0c8c28aa998872f745cb7db5d0be914bac467786a7591",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/pipeVariables.llm, write to %pipeVariables%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_pipevariables_file",
      "Description": "Access the file located at 'llm/pipeVariables.llm', read its content, and assign that content to the variable named %pipeVariables% for further use in the program.",
      "PrFileName": "06. read_llm_pipevariables_file.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\06. read_llm_pipevariables_file.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:10.4754857+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 5,
      "LineNumber": 46,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "65f6f2487df75a59b9c8909db25081538edeeb06ee2476f059c9f8f823598246",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/stepSystem.llm, load vars, write to %system%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_step_system_llm_load_vars_write_to_system",
      "Description": "Open and read the file located at 'llm/stepSystem.llm', parse or load any variables contained within that file, and then assign the loaded data to the variable named %system% for further use.",
      "PrFileName": "07. read_llm_step_system_llm_load_vars_write_to_system.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\07. read_llm_step_system_llm_load_vars_write_to_system.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:21.6347761+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 6,
      "LineNumber": 47,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "9346c48929e4b126e9b29b69e4e9ba11eb9a8671d4917f0c4f6db42099b51e45",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "write out \"\\n==== system ==== %system%\\n==== system ====\\nstep.Text: %step.Text%\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_system_and_step_text",
      "Description": "Write to the output stream a string that includes separators and labels, showing the current value of the %system% variable and the %step.Text% variable, formatted with new lines and equal signs for clarity.",
      "PrFileName": "08. write_out_system_and_step_text.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\08. write_out_system_and_step_text.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": "Very High",
      "Inconsistency": null,
      "Generated": "2025-12-09T17:11:44.0798911+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 7,
      "LineNumber": 48,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "8492bc8cc8f7a20677230c3ab7e490b4e4af3386dabdf8cce9c58a2fcc30895c",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": "Output a formatted text block displaying the values of the variables %system% and %step.Text%"
    },
    {
      "Text": "[llm] system: %system%,\n    user: %step.Text%\n    on complete: ValidateOutput\n    write to %prStep%",
      "Comment": null,
      "ModuleType": "PLang.Modules.LlmModule",
      "Name": "llm_prompt_with_validation",
      "Description": "Send a prompt to the language model using the provided system context and user input text, write the model's response to the variable %prStep%, and upon completion, call the ValidateOutput step to check the response.",
      "PrFileName": "09. llm_prompt_with_validation.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\09. llm_prompt_with_validation.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:27.9976064+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 8,
      "LineNumber": 49,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "fc800dcbc4c7b49c7e779608be8039880fc4af93b1f81c879bbb76d090764c6a",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "write out \"\\n\\nprMethod: %prStep%\"",
      "Comment": null,
      "ModuleType": "PLang.Modules.OutputModule",
      "Name": "write_out_prstep_value",
      "Description": "Write to the output stream the string consisting of two newline characters followed by the text 'prMethod: ' and then the value of the variable %prStep%. This is typically used to display or log the value of %prStep% to the user or system output.",
      "PrFileName": "10. write_out_prstep_value.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\10. write_out_prstep_value.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:33.4528192+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 9,
      "LineNumber": 53,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "446e39e9c6223c1e40425a02935eb20f3ead23daff0beeb530950fc0f3d35228",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] get class description from %prStep.module%, %prStep.methods%, write to %methods%",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "get_class_description_from_module_and_methods",
      "Description": "Using the values stored in %prStep.module% and %prStep.methods%, obtain a description of the class and write this description into the %methods% variable for further use",
      "PrFileName": "11. get_class_description_from_module_and_methods.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\11. get_class_description_from_module_and_methods.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:39.6406817+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 10,
      "LineNumber": 54,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "cb5afc3f0b8702af8196446f7477e04b0360112df3d3fb43f33f79b48140ad06",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/methodSchemeInfo.llm, write to %methodScheme%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_methodschemeinfo_llm_write_to_variable",
      "Description": "Access the file located at 'llm/methodSchemeInfo.llm', read its entire content, and assign that content to the variable named %methodScheme% for further use in the program.",
      "PrFileName": "12. read_llm_methodschemeinfo_llm_write_to_variable.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\12. read_llm_methodschemeinfo_llm_write_to_variable.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:45.0080164+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 11,
      "LineNumber": 55,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "ce6210aca6e7e015e46de4110d35b45304324e4a368d69e553ee8ca90bddcd1d",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "read llm/methodSchemeInfo.llm, load vars, write to %methodSystem%",
      "Comment": null,
      "ModuleType": "PLang.Modules.FileModule",
      "Name": "read_llm_methodschemeinfo_and_load_vars",
      "Description": "Read the file located at llm/methodSchemeInfo.llm, extract or load variables from its content, and write the resulting data into the variable %methodSystem% for further use.",
      "PrFileName": "13. read_llm_methodschemeinfo_and_load_vars.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\13. read_llm_methodschemeinfo_and_load_vars.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:55.109372+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 12,
      "LineNumber": 56,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "ea5ec80fc3c6741525240addaf5f8b9aadd53d4622e0f0900ac97e03ec9c6903",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[llm] system:  %methodSystem%\n        user: %step.Text%\n                %prStep%\n        scheme: typeof(plang.prFunction)\n        write to %prFunction%",
      "Comment": null,
      "ModuleType": "PLang.Modules.LlmModule",
      "Name": "invoke_llm_with_system_and_user_prompts",
      "Description": "Send the system prompt stored in %methodSystem% and the user prompt stored in %step.Text% along with additional context %prStep% to the language model. The response is expected to conform to the type plang.prFunction and is written to the variable %prFunction%.",
      "PrFileName": "14. invoke_llm_with_system_and_user_prompts.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\14. invoke_llm_with_system_and_user_prompts.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:55.2218954+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 13,
      "LineNumber": 57,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "dc6e240c9f3ebe82a4f16441d34d25453191c51f873adcaf43c6471a625c4ef2",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] validate and load %step%, %prFunction%,\n    on error FixStep retry 3 times",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "validate_and_load_step_and_prfunction_with_retry",
      "Description": "Perform validation on the variables %step% and %prFunction%. If validation fails, execute the FixStep procedure and retry the validation process up to three times before failing.",
      "PrFileName": "15. validate_and_load_step_and_prfunction_with_retry.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\15. validate_and_load_step_and_prfunction_with_retry.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:55.2803367+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": [
        {
          "IgnoreError": false,
          "Message": null,
          "StatusCode": null,
          "Key": "*",
          "GoalToCall": {
            "Path": ".build\\Build\\FixStep\\00. Goal.pr",
            "Name": "FixStep",
            "Parameters": {},
            "IsAsync": false,
            "WaitBeforeExecutingInMs": 0,
            "AfterExecution": null
          },
          "RetryHandler": {
            "RetryCount": 3,
            "RetryDelayInMilliseconds": null
          },
          "RunRetryBeforeCallingGoalToCall": false
        }
      ],
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 14,
      "LineNumber": 62,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "9999977432b8651eebfadab68e477323e3faa14046ed98a350ab0a9384e71ad0",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    },
    {
      "Text": "[plang] save %prFunction% to %prMethod.PrPath%",
      "Comment": null,
      "ModuleType": "PLang.Modules.PlangModule",
      "Name": "save_variable_to_file_path",
      "Description": "Take the data stored in the variable %prFunction% and write it to the file location indicated by the variable %prMethod.PrPath%. This implies a file write operation.",
      "PrFileName": "16. save_variable_to_file_path.pr",
      "RelativePrPath": ".build\\Build\\AnalyzeStep\\16. save_variable_to_file_path.pr",
      "InstructionHash": null,
      "Indent": 0,
      "Execute": true,
      "RunOnce": false,
      "Confidence": null,
      "Inconsistency": null,
      "Generated": "2025-12-09T17:09:55.3403898+00:00",
      "WaitForExecution": true,
      "LoggerLevel": null,
      "ErrorHandlers": null,
      "Retry": false,
      "RetryCount": 1,
      "CacheHandler": null,
      "CancellationHandler": null,
      "Number": 15,
      "LineNumber": 64,
      "EventBinding": null,
      "IsEvent": false,
      "Hash": "c43e16646f5c3e2e248e9274e41e9ab7b4517c30126682b13e9629185c25dbef",
      "BuilderVersion": null,
      "RelativeGoalPath": "\\Build.goal",
      "UserIntent": null
    }
  ],
  "SubGoals": [],
  "Description": "The AnalyzeStep goal is designed to analyze a specific step in a Plang program. It begins by outputting the text of the step being analyzed. It retrieves class descriptions from specified modules and renders a template that lists methods in those modules. The goal also reads various configuration files to gather rules and variables, and it outputs the system state and the text of the step. It interacts with a language model to process the system and user inputs, validating the output and handling errors if necessary. Finally, it saves the processed function to a specified path.",
  "Visibility": 0,
  "GoalFileName": "Build.goal",
  "PrFileName": "00. Goal.pr",
  "RelativeGoalPath": "\\Build.goal",
  "RelativeGoalFolderPath": "\\",
  "RelativePrPath": ".build\\Build\\AnalyzeStep\\00. Goal.pr",
  "RelativePrFolderPath": ".build\\Build\\AnalyzeStep",
  "RelativeAppStartupFolderPath": null,
  "BuilderVersion": "0.1.18.1",
  "GoalInfo": null,
  "Injections": [],
  "Signature": null,
  "Hash": "6e9411b0e7b893e7cfd8b0535243225bfb5158de49d6e69dbbc480d51eb9f272",
  "IncomingVariablesRequired": {
    "%step.Text%": "The text description of the step being analyzed.",
    "%step.Module%": "The primary module from which to retrieve the class description.",
    "%step.SecondModule%": "An additional module from which to retrieve the class description."
  },
  "DataSourceName": null,
  "IsSetup": false,
  "IsEvent": false
}